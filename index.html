<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>L√¨ X√¨ May M·∫Øn</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            font-family: Arial, sans-serif;
            color: white;
            overflow: hidden;

            /* ·∫¢NH N·ªÄN */
            background-image: url("https://i.pinimg.com/736x/41/ba/e4/41bae4f507694a5408f34f8f1add5ada.jpg");
            background-size: cover;
            /* ph·ªß to√†n m√†n h√¨nh */
            background-position: center;
            /* cƒÉn gi·ªØa */
            background-repeat: no-repeat;
            /* kh√¥ng l·∫∑p */
        }


        h1 {
            text-align: center;
            margin-top: 40px
        }

        p {
            text-align: center;
            font-size: 14px;
            margin: 0;
        }

        .container {
            flex: 1;
            /* chi·∫øm h·∫øt ph·∫ßn c√≤n l·∫°i */
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 20px;
            align-content: center;
        }

        .envelope {
            width: 100%;
            aspect-ratio: 3 / 4;
            background: red;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            transition: transform 0.2s;
        }

        .envelope:active {
            transform: scale(0.95);
        }

        .opened {
            background: gold;
            color: black;
            font-size: 12px;
            font-weight: bold;
            padding: 4px;
            text-align: center;
        }

        #result {
            font-size: 16px;
            padding: 5px;
            min-height: 40px;
        }

        button {
            padding: 8px 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 5px;
        }

        #musicBtn {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 12px;
            padding: 6px 10px;
        }

        /* ===== POPUP TR√öNG TH∆Ø·ªûNG ===== */
        .win-popup {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .win-popup.active {
            opacity: 1;
            pointer-events: all;
        }

        .win-box {
            background: gold;
            color: black;
            padding: 30px 20px;
            border-radius: 16px;
            text-align: center;
            animation: popScale 0.4s ease;
        }

        .win-box h2 {
            margin: 0 0 10px 0;
            font-size: 22px;
        }

        .win-box p {
            font-size: 20px;
            font-weight: bold;
        }

        @keyframes popScale {
            0% {
                transform: scale(0.5);
            }

            100% {
                transform: scale(1);
            }
        }

        /* ===== CONFETTI ===== */
        .confetti {
            position: fixed;
            width: 8px;
            height: 8px;
            background: red;
            top: -10px;
            animation: fall linear forwards;
            z-index: 1000;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* ===== LOGIN POPUP ===== */
        #loginOverlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        #loginBox {
            background: white;
            color: black;
            padding: 30px 25px;
            border-radius: 16px;
            text-align: center;
            width: 280px;
            animation: popScale 0.3s ease;
        }

        #loginBox input {
            width: 100%;
            padding: 8px;
            margin: 6px 0;
            border-radius: 8px;
            border: 1px solid #ccc;
        }


        #gameSection {
            display: none;
        }

        #userInfo {
            position: fixed;
            top: 10px;
            left: 10px;
            font-size: 13px;
            background: rgba(0, 0, 0, 0.5);
            padding: 6px 10px;
            border-radius: 8px;
        }
    </style>

</head>


<body>

    <h1>üßß cnf247 üßß</h1>
    <p>Ch·ªçn 1 bao l√¨ x√¨ ƒë·ªÉ nh·∫≠n ti·ªÅn!</p>

    <!-- Nh·∫°c n·ªÅn -->
    <audio id="bgMusic" loop preload="auto">
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3" type="audio/mpeg">
    </audio>

    <!-- √Çm thanh m·ªü l√¨ x√¨ -->
    <audio id="openSound" preload="auto">
        <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
    </audio>
    <div id="loginOverlay">
        <div id="loginBox">
            <input type="text" id="username" placeholder="T√†i kho·∫£n">
            <input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
            <button onclick="login()">ƒêƒÉng nh·∫≠p</button>
            <p id="loginError" style="color:yellow;"></p>
        </div>
    </div>


    <div id="gameSection">
        <div id="userInfo"></div>
        <button id="musicBtn" onclick="toggleMusic()">üîä B·∫≠t nh·∫°c</button>

        <div class="container" id="game"></div>

        <div id="result"></div>

        <button onclick="resetGame()">Ch∆°i l·∫°i</button>

    </div>


    <script>
        /* ===== LOGIN SYSTEM ===== */

        /* ===== LOGIN SYSTEM ===== */

        const ACCOUNTS = [
            { username: "admin", password: "123456" },
            { username: "user1", password: "111111" },
            { username: "boss", password: "999999" }
        ];

        let isLoggedIn = false;

        function login() {
            const user = document.getElementById("username").value;
            const pass = document.getElementById("password").value;
            const error = document.getElementById("loginError");
            document.getElementById("userInfo").innerHTML =
                "üëã Xin ch√†o, <b>" + user + "</b> " +
                '<button onclick="logout()" style="font-size:10px;padding:3px 6px;margin-left:5px;">ƒêƒÉng xu·∫•t</button>';

            const found = ACCOUNTS.find(acc =>
                acc.username === user && acc.password === pass
            );

            if (found) {
                isLoggedIn = true;
                localStorage.setItem("loggedUser", user);

                document.getElementById("loginOverlay").style.display = "none";

                document.getElementById("gameSection").style.display = "block";
            } else {
                error.innerText = "Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!";
            }
        }

        function logout() {
            localStorage.removeItem("loggedUser");
            location.reload();
        }

        window.onload = function () {

            const savedUser = localStorage.getItem("loggedUser");

            if (savedUser) {

                const confirmLogout = confirm("B·∫°n c√≥ mu·ªën ƒëƒÉng xu·∫•t kh√¥ng?");
                document.getElementById("gameSection").style.display = "block";

                document.getElementById("userInfo").innerHTML =
                    "üëã Xin ch√†o, <b>" + savedUser + "</b> " +
                    '<button onclick="logout()" style="font-size:10px;padding:3px 6px;margin-left:5px;">ƒêƒÉng xu·∫•t</button>';

                if (confirmLogout) {
                    localStorage.removeItem("loggedUser");
                    return;
                }

                isLoggedIn = true;
                document.getElementById("loginOverlay").style.display = "none";
                if (localStorage.getItem("played_" + savedUser)) {
                    played = true;
                    alert("T√†i kho·∫£n n√†y ƒë√£ ch∆°i r·ªìi!");
                }
            }
        };



        const savedUser = localStorage.getItem("loggedUser");
        if (savedUser) {
            isLoggedIn = true;
            document.getElementById("loginBox").innerHTML =
                "üëã Xin ch√†o " + savedUser +
                ' <button onclick="logout()">ƒêƒÉng xu·∫•t</button>';
        }

        const basePrizes = [10000, 20000, 50000, 100000, 200000, 500000];
        let played = false;

        const prizes = [];
        for (let i = 0; i < 4; i++) {
            prizes.push(...basePrizes);
        }

        const bgMusic = document.getElementById("bgMusic");
        const openSound = document.getElementById("openSound");
        const musicBtn = document.getElementById("musicBtn");

        bgMusic.volume = 0.3;

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function playOpenSound() {
            openSound.pause();
            openSound.currentTime = 0;
            openSound.play().catch(() => { });
        }

        function toggleMusic() {
            if (bgMusic.paused) {
                bgMusic.play().then(() => {
                    musicBtn.innerText = "üîá T·∫Øt nh·∫°c";
                });
            } else {
                bgMusic.pause();
                musicBtn.innerText = "üîä B·∫≠t nh·∫°c";
            }
        }

        function createGame() {
            const game = document.getElementById("game");
            game.innerHTML = "";
            const shuffledPrizes = shuffle([...prizes]);

            shuffledPrizes.forEach((money) => {
                const envelope = document.createElement("div");
                envelope.classList.add("envelope");
                envelope.innerHTML = "üßß";

                envelope.onclick = function () {

                    if (!isLoggedIn) {
                        alert("Vui l√≤ng ƒëƒÉng nh·∫≠p tr∆∞·ªõc!");
                        return;
                    }

                    const currentUser = localStorage.getItem("loggedUser");

                    if (localStorage.getItem("played_" + currentUser)) {
                        alert("T√†i kho·∫£n n√†y ƒë√£ ch∆°i r·ªìi!");
                        return;
                    }

                    if (played) return;

                    played = true;

                    playOpenSound();

                    envelope.classList.add("opened");
                    envelope.innerHTML = money.toLocaleString() + " ƒë";

                    // L∆∞u tr·∫°ng th√°i ƒë√£ ch∆°i
                    localStorage.setItem("played_" + currentUser, "true");

                    showWinEffect(money);
                };

                game.appendChild(envelope);
            });
        }

        function resetGame() {
            played = false;
            document.getElementById("result").innerHTML = "";
            createGame();
        }

        createGame();

        document.addEventListener("click", function startMusicOnce() {
            if (bgMusic.paused) {
                bgMusic.play().then(() => {
                    musicBtn.innerText = "üîá T·∫Øt nh·∫°c";
                }).catch(() => { });
            }
            document.removeEventListener("click", startMusicOnce);
        });
        function showWinEffect(money) {
            const popup = document.getElementById("winPopup");
            const winAmount = document.getElementById("winAmount");

            winAmount.innerText = money.toLocaleString() + " ƒë";
            popup.classList.add("active");

            createConfetti();
        }

        function closePopup() {
            document.getElementById("winPopup").classList.remove("active");
        }

        function createConfetti() {
            for (let i = 0; i < 80; i++) {
                const confetti = document.createElement("div");
                confetti.classList.add("confetti");

                confetti.style.left = Math.random() * 100 + "vw";
                confetti.style.background =
                    `hsl(${Math.random() * 360}, 100%, 50%)`;

                confetti.style.animationDuration =
                    (Math.random() * 2 + 2) + "s";

                document.body.appendChild(confetti);

                setTimeout(() => confetti.remove(), 4000);
            }
        }


    </script>
    <div class="win-popup" id="winPopup">
        <div class="win-box">
            <h2>üéâ Ch√∫c M·ª´ng üéâ</h2>
            <p id="winAmount"></p>
            <button onclick="closePopup()">ƒê√≥ng</button>
        </div>
    </div>

</body>

</html>